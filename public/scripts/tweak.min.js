!function(t){var e;e="undefined"!=typeof exports?t.tweak=exports:t.tweak={},e.$=t.jQuery||t.Zepto||t.ender||t.$,e.strict=!1,e.uids={c:0,cp:0,v:0,m:0,r:0,cl:0,ct:0,s:0}}(window),function(t){tweak.__hasProp={}.hasOwnProperty,tweak.Extends=function(t,e){var n,o;n=function(){this.constructor=t};for(o in e)tweak.__hasProp.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},tweak.Super=function(t,e){return t.__super__[e].call(this)},tweak.Class=function(){function t(){}return t.prototype["extends"]=function(t,e){},t.prototype["super"]=function(t,e){},t}()}(window),function(t){tweak.Common=function(){function e(){}return e.prototype.combine=function(t,e){var n,o;for(n in e)o=e[n],"object"==typeof o?(null==t[n]&&(t[n]=o instanceof Array?[]:{}),t[n]=tweak.Common.combine(t[n],o)):t[n]=o;return t},e.prototype.clone=function(t){var e,n;if(null===t||"object"!=typeof t||t===this)return t;if(t instanceof Date)return n=new Date,n.setTime(t.getTime()),n;if(t instanceof Array)n=[];else{if("object"!=typeof t)throw new Error("Unable to copy object, type not supported.");n={}}for(e in t)t.hasOwnProperty(e)&&(n[e]=tweak.Common.clone(t[e]));return n},e.prototype.parse=function(t){return JSON["string"==typeof t?"parse":"data"](t)},e.prototype.findModule=function(t,e,n){var o,r,i,s;for(i=0,s=t.length;s>i;i++){o=t[i];try{return tweak.Common.require(o,e)}catch(a){if(r=a,"Error"!==r.name)throw r.message="Module ("+o+"}) found. Encountered "+r.name+": "+r.message,r}}if(null!=n)return n;throw new Error("No default module ("+e+") for component "+t[0])},e.prototype.require=function(t,e,n){var o,r;r=tweak.Common.relToAbs(t,e);try{return require(r)}catch(i){if(o=i,null!=n)return n;throw o}},e.prototype.splitMultiName=function(t,e){var n,o,r,i,s,a,l,p,u,h;for(p=[],s=/^(.*)\[(\d*)(?:[,\-](\d*)){0,1}\](.*)$/,"string"==typeof e&&(e=e.split(/\s+/)),u=0,h=e.length;h>u;u++)if(n=e[u],a=s.exec(n),null!=a)for(i=a[1],r=a[2]||0,o=a[3]||r,l=a[4];o>=r;)p.push(tweak.Common.relToAbs(t,""+i+r++ +l));else p.push(tweak.Common.relToAbs(t,n));return p},e.prototype.relToAbs=function(t,e){var n;return n=e.split(/\.{2,}[\/\\]*/).length-1||0,t=t.replace(new RegExp("([\\/\\\\]*[^\\/\\\\]+){"+n+"}[\\/\\\\]?$"),""),e.replace(/^(\.+[\/\\]*)+/,""+t+"/")},e.prototype.on=function(e,n,o,r){var i,s,a,l,p,u;null==r&&(r=!1),null==e.__events&&(e.__events={}),u=null!=(p=e.__events)[n]?p[n]:p[n]=[];for(a in u)i=u[a],null!=o&&i.callback!==o||i.capture!==r||(e.__events[n][a].enabled=!0,l=!0);l||(e.__events[n].push({element:e,type:n,callback:o,capture:r,enabled:!0}),s=function(t){var o,r,s,a;for(s=e.__events[n],a=[],o=0,r=s.length;r>o;o++)i=s[o],i.enabled&&a.push(i.callback(t,i.element));return a},t.addEventListener?e.addEventListener(n,s,r):t.attachEvent?e.attachEvent("on"+n,s):e["on"+n]=s)},e.prototype.off=function(t,e,n,o){var r,i,s,a;null==o&&(o=!1),null==t.__events&&(t.__events={}),a=null!=(s=t.__events)[e]?s[e]:s[e]=[];for(i in a)r=a[i],null!=n&&r.callback!==n||r.capture!==o||(t.__events[e][i].enabled=!1)},e.prototype.trigger=function(e,n){var o;o=t.document,o.createEvent?("string"==typeof n&&(n=new Event(n)),n.root=e,e.dispatchEvent(n)):("string"==typeof n&&(n=o.createEventObject()),n.root=e,e.fireEvent("on"+n,n))},e}(),tweak.Common=new tweak.Common}(window),function(t){var e=[].slice;tweak.Events=function(){function t(){}return t.prototype.findEvent=function(t,e){var n,o,r,i,s,a;for(null==e&&(e=!1),"string"==typeof t&&(t=t.split(/\s+/)),o=this.__events=this.__events||{},a=[],i=0,s=t.length;s>i;i++){if(r=t[i],!(n=o[r])){if(!e)continue;n=this.__events[r]={name:r,__callbacks:[]}}a.push(n)}return a},t.prototype.addEvent=function(t,e,n,o){var r,i,s,a,l,p,u,h,c;for(null==n&&(n=this),("number"==typeof n||null===n)&&(o=n,n=o||this),h=this.findEvent(t,!0),a=0,p=h.length;p>a;a++){for(r=h[a],i=!1,c=r.__callbacks,l=0,u=c.length;u>l;l++)s=c[l],s.callback===e&&n===s.ctx&&(s.max=o,s.calls=0,s.listen=i=!0);i||r.__callbacks.push({ctx:n,callback:e,max:o,calls:0,listen:!0})}},t.prototype.removeEvent=function(t,e,n){var o,r,i,s,a,l,p;for(null==n&&(n=this),l=this.findEvent(t),s=0,a=l.length;a>s;s++){o=l[s],p=o.__callbacks;for(i in p)r=p[i],null!=e&&e!==r.callback||null!=n&&n!==r.ctx||o.__callbacks.splice(i,1);0===o.__callbacks.length&&delete this.__events[o.name]}},t.prototype.triggerEvent=function(){var t,n,o,r,i,s,a,l,p,u,h;for(r=arguments[0],i=2<=arguments.length?e.call(arguments,1):[],"object"==typeof r&&!r instanceof Array&&(r=r.names||[],t=r.context||null),u=this.findEvent(r),s=0,l=u.length;l>s;s++)for(n=u[s],h=n.__callbacks,a=0,p=h.length;p>a;a++)o=h[a],!o.listen||null!=t&&t!==o.ctx||(null!=o.max&&++o.calls>=o.max&&(o.listen=!1),setTimeout(function(){this.callback.apply(this.ctx,i)}.bind(o),0))},t.prototype.updateEvent=function(t,e){var n,o,r,i,s,a,l,p,u,h,c,f,d,m;for(null==e&&(e={}),r=e.context,l=e.max,p=e.reset,o=p?0:e.calls||0,a=e.listen,n=e.callback,d=this.findEvent(t),u=0,c=d.length;c>u;u++)for(i=d[u],m=i.__callbacks,h=0,f=m.length;f>h;h++)s=m[h],null!=r&&r===s.ctx||null!=n&&n===s.callback||(null!=l&&(s.max=l),null!=o&&(s.calls=o),null!=a&&(s.listen=a))},t.prototype.resetEvents=function(){return this.__events={}},t}()}(window),function(t){var e={}.hasOwnProperty,n=function(t,n){function o(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t},o=[].slice;tweak.Store=function(t){function e(){this.uid="s_"+tweak.uids.s++}return n(e,t),e.prototype._type="BASE",e.prototype.length=0,e.prototype.data=[],e.prototype.uid=0,e.prototype["super"]=tweak["super"],e.prototype.init=function(){},e.prototype.set=function(){var t,e,n,r,i,s,a,l,p,u;t=arguments[0],r=2<=arguments.length?o.call(arguments,1):[],l=r[0],p=typeof t,("string"===p||"number"===p)&&(s=t,t={},t[s]=r[0],l=r[1]),n={};for(e in t)a=t[e],i=this.data[e],null==i&&this.length++,this.data[e]=("function"==typeof this[u="__set"+e.replace(/^[a-z]/,function(t){return t.toUpperCase()})]?this[u](a):void 0)||a,l||this.triggerEvent("changed:"+e,a);l||this.triggerEvent("changed")},e.prototype.same=function(t,e){var n,o;for(n in t)if(o=t[n],null==e[n]||e[n]!==o)return!1;return!0},e.prototype.get=function(){var t,e,n,r,i,s,a,l,p,u;for(s=arguments[0],a=2<=arguments.length?o.call(arguments,1):[],null==s&&(s=function(){var t,e;t=this.data,e=[];for(i in t)r=t[i],e.push(i);return e}.call(this)),("string"==typeof s||"number"==typeof s)&&(s=[s]),t=this.data instanceof Array?[]:{},n=l=0,p=s.length;p>l;n=++l)r=s[n],e="function"==typeof this[u="__get"+(""+r).replace(/^[a-z]/,function(t){return t.toUpperCase()})]?this[u].apply(this,a):void 0,null==e&&(e=this.data[r]),t[r]=e;return 1>=n&&(t=t[r]),t},e.prototype.has=function(t,e){var n,o,r,i,s,a;for(("string"==typeof t||"number"==typeof t)&&(t=[t]),o=i=0,s=t.length;s>i;o=++i)if(r=t[o],n="function"==typeof this[a="__get"+r.replace(/^[a-z]/,function(t){return t.toUpperCase()})]?this[a].apply(this,e):void 0,null==n&&null==this.data[r])return!1;return!0},e.prototype.where=function(t){var e,n,o,r;r=[],e=this.data;for(n in e)o=e[n],o===t&&r.push(n);return r},e.prototype.reset=function(){this.length=0,this.triggerEvent("changed")},e.prototype["import"]=function(t,e){var n,o,r;null==e&&(e=!0);for(o in t)n=t[o],null!=(null!=(r=this.data[o])?r["import"]:void 0)?this.data[o]["import"](n,e):this.set(o,n,e)},e.prototype["export"]=function(t){var e,n,o,r,i;for(o={},null==t&&(t=function(){var t,o;t=this.data,o=[];for(n in t)e=t[n],o.push(n);return o}.call(this)),r=0,i=t.length;i>r;r++)n=t[r],null!=(e=this.get(n))&&(null!=e["export"]?o[n]=e["export"]():o[n]=e);return o},e}(tweak.Events)}(window),function(t){var e={}.hasOwnProperty,n=function(t,n){function o(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};tweak.Model=function(t){function e(t){this.data=null!=t?t:{},this.uid="m_"+tweak.uids.m++}return n(e,t),e.prototype.data={},e.prototype._type="model",e.prototype.remove=function(t,e){var n,o,r,i,s,a;for("string"==typeof t&&(t=[t]),i=0,s=t.length;s>i;i++){r=t[i],a=this.data;for(n in a)o=a[n],n===r&&(this.length--,delete this.data[n],e||this.triggerEvent("removed:"+n))}e||this.triggerEvent("changed")},e.prototype.pluck=function(t){var e,n,o,r;o=[],r=this.data;for(e in r)n=r[e],n===t&&o.push(e);return o},e.prototype.reset=function(){this.data={},e.__super__.reset.call(this)},e}(tweak.Store)}(window),function(t){var e={}.hasOwnProperty,n=function(t,n){function o(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t},o=[].slice;tweak.Collection=function(t){function e(t){this.data=null!=t?t:[],this.uid="cl_"+tweak.uids.cl++}var r;return n(e,t),e.prototype._type="collection",r=function(t,e){var n,o;for(o in t)n=t[o],e("changed:"+o,n);return triggerEvent("changed",t)},e.prototype.add=function(t,e){this.set(this.length,t,e)},e.prototype.at=function(t){return this.get(t)},e.prototype.push=function(t,e){this.set(this.length,t,e)},e.prototype.splice=function(t,e,n,i){var s;null==i&&(i=!1),(s=this.data).splice.apply(s,[t,e].concat(o.call(n))),this.length=this.data.length,i||r(this.data,this.triggerEvent)},e.prototype.insert=function(t,e,n){this.splice(position,0,e,n)},e.prototype.unshift=function(t,e){return this.splice(0,0,t,e),this.length},e.prototype.remove=function(t,e){var n,o,r;for(t instanceof Array||(t=[t]),o=0,r=t.length;r>o;o++)n=t[o],this.data.splice(n,1),e||this.triggerEvent("removed:"+n);e||this.triggerEvent("changed")},e.prototype.removeAt=function(t,e){var n,o,r;n=this.at(t);for(o in n)r=n[o],this.remove(o,e)},e.prototype.pop=function(t){var e,n;return e=this.length-1,n=this.data[e],this.remove(e,t),n},e.prototype.shift=function(t){var e;return e=this.data[0],this.remove(0,t),e},e.prototype.reduce=function(t,e){this.splice(0,t,e)},e.prototype.reduceRight=function(t,e){this.splice(0,this.length-t,e)},e.prototype.indexes=function(t){var e,n,o,r;o=this.data,r=[];for(e in o)n=o[e],t===n&&r.push(e);return r},e.prototype.concat=function(t,e){var n;this.splice(this.length-1,0,(n=[]).concat.apply(n,t),e)},e.prototype.reset=function(){this.data=[],e.__super__.reset.call(this)},e.prototype.every=function(){return this.data.every(arguments)},e.prototype.filter=function(){return this.data.filter(arguments)},e.prototype.forEach=function(){return this.data.forEach(arguments)},e.prototype.join=function(){return this.data.join(arguments)},e.prototype.map=function(){return this.data.map(arguments)},e.prototype.reverse=function(t){var e;return e=this.data.reverse(),t||r(this.data,this.triggerEvent),e},e.prototype.slice=function(){return this.data.slice(arguments)},e.prototype.some=function(){return this.data.some(arguments)},e.prototype.sort=function(t,e){var n;return null==e&&(e=!1),n=null!=t?this.data.sort(t):this.data.sort(),r(this.data,this.triggerEvent),n},e}(tweak.Store)}(window),function(t){var e={}.hasOwnProperty,n=function(t,n){function o(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};tweak.Controller=function(t){function e(){this.uid="ct_"+tweak.uids.ct++}return n(e,t),e.prototype.uid=0,e.prototype["super"]=tweak["super"],e.prototype.init=function(){},e}(tweak.Events)}(window),function(t){var e={}.hasOwnProperty,n=function(t,n){function o(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t},o=[].slice;tweak.View=function(t){function e(t){this.config=null!=t?t:{},this.uid="v_"+tweak.uids.v++}var r;return n(e,t),e.prototype.uid=0,e.prototype["super"]=tweak["super"],r=tweak.$,e.prototype.init=function(){},e.prototype.render=function(t){var e,n,o,i,s,a,l,p,u,h,c,f,d;return this.isAttached()&&!t?this.triggerEvent("rendered"):(u=function(t){return function(e){var n,o,i,s;return o=null,e?(n=function(e){var n,r,s,a,l,p;for(p=[],a=0,l=e.length;l>a&&(r=e[a],!o);a++)n=r.getAttribute("data-attach"),null==n||n.match(/\s+/)?p.push(void 0):p.push(function(){var t,e,a,l;for(a=tweak.Common.splitMultiName(this.component.parent.name||"",n),l=[],t=0,e=a.length;e>t;t++){if(s=a[t],i===s){o=r;break}l.push(void 0)}return l}.call(t));return p},i=(null!=(s=t.config.attach)?s.to:void 0)||t.component.name,n(e),n(r("[data-attach]",e)),o):void 0}}(this),l=function(t,e,n){var o,i,s,a,l,p;switch(e=r(e)[0],n){case"prefix":case"before":return t.insertBefore(e,t.firstChild),t.firstElementChild;case"replace":for(p=t.children,a=0,l=p.length;l>a;a++){i=p[a];try{t.removeChild(i)}catch(u){o=u}}return t.appendChild(e),t.firstElementChild;default:return/^\d+$/.test(""+n)?(s=Number(n),t.insertBefore(e,t.children[s]),t.children[s]):(t.appendChild(e),t.lastElementChild)}},null==(p=this.config).attach&&(p.attach={}),o=function(){var t,e,n,o;for(n=this.component.names,o=[],t=0,e=n.length;e>t;t++)i=n[t],o.push(i.replace(/[\/\\]/g,"-"));return o}.call(this),a=(this.config.template?tweak.Common.require(this.config.template):tweak.Common.findModule(this.component.paths,"./template"))((null!=(h=this.config.view)?h.data:void 0)||this.model.data),e=(null!=(c=this.config.attach)?c.to:void 0)||this.component.name,s=null!=(f=this.component.parent)&&null!=(d=f.view)?d.el:void 0,n=u(s)||u(document.documentElement)||s||document.documentElement,this.$el=r(l(n,a,this.config.attach.method)),this.el=this.$el[0],this.$el.addClass(o.join(" ")),this.$el.attr("id",this.uid),t||this.triggerEvent("rendered"),void this.init())},e.prototype.clear=function(t){var e,n,o,i,s;if(null==t&&(t=this.el),t=r(t)[0],o=t.remove,null!=o)o();else{for(n=r("*",t),n.push(t),i=0,s=n.length;s>i;i++)e=n[i],this.off(e);t.parentNode.removeChild(t),t=null}},e.prototype.isAttached=function(t,e){return null==t&&(t=this.el),null==e&&(e=document.documentElement),e.contains(t)},e.prototype.element=function(t,e){var n,o,i,s;if(null==e&&(e=this.el),t instanceof Array){for(s=[],o=0,i=t.length;i>o;o++)n=t[o],s.push(r(n,e));return s}return r(t,e)},e.prototype.on=function(){var t,e,n,i,s,a,l,p;if(t=arguments[0],i=2<=arguments.length?o.call(arguments,1):[],!("function"==typeof(s=r(t)).on?s.on.apply(s,i):void 0))for(e=this.element(t||this.el),a=0,l=e.length;l>a;a++)n=e[a],(p=tweak.Common).on.apply(p,[n].concat(o.call(i)))},e.prototype.off=function(){var t,e,n,i,s,a,l,p;if(t=arguments[0],i=2<=arguments.length?o.call(arguments,1):[],!("function"==typeof(s=r(t)).off?s.off.apply(s,i):void 0))for(e=this.element(t||this.el),a=0,l=e.length;l>a;a++)n=e[a],(p=tweak.Common).off.apply(p,[n].concat(o.call(i)))},e.prototype.trigger=function(){var t,e,n,i,s,a,l,p;if(t=arguments[0],i=2<=arguments.length?o.call(arguments,1):[],!("function"==typeof(s=r(t)).trigger?s.trigger.apply(s,i):void 0))for(e=this.element(t||this.el),a=0,l=e.length;l>a;a++)n=e[a],(p=tweak.Common).trigger.apply(p,[n].concat(o.call(i)))},e}(tweak.Events)}(window),function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,o=function(t,e){function o(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t};tweak.History=function(n){function r(){this.__checkChanged=e(this.__checkChanged,this),"undefined"!=typeof t&&(this.location=(this.window=t).location,this.history=t.history)}return o(r,n),r.prototype.usePush=!0,r.prototype.useHash=!1,r.prototype.started=!1,r.prototype.root="/",r.prototype.iframe=null,r.prototype.url=null,r.prototype.__interval=null,r.prototype.intervalRate=50,r.prototype.start=function(t){var e,n,o,r,i,s,a,l;return null==t&&(t={}),this.started?void 0:(this.started=!0,a=this.usePush=t.useHash?!1:null!=(l=this.history)?l.pushState:void 0,s=this.useHash=!a,(t.forceRefresh||s&&!("onhashchange"in this.window))&&(this.usePush=this.useHash=s=a=!1),t.interval&&(this.intervalRate=t.interval),this.root=r=("/"+(t.root||"/")+"/").replace(/^\/+|\/+$/g,"/"),this.url=i=this.__getURL(),o=this.location,s?this.location.replace(""+r+"#"+this.__getPath()+this.__getHash()):a&&""!==this.__getHash()&&this.set(this.__getHash(),{replace:!0}),a||s||t.forceRefresh||(n=document.createElement("iframe"),n.src="javascript:0",n.style.display="none",n.tabIndex=-1,e=document.body,this.iframe=e.insertBefore(n,e.firstChild).contentWindow,this.__setHash(this.iframe,"#"+i,!1)),this.__toggleListeners(),t.silent?void 0:this.triggerEvent("changed",this.url.replace(/^\/+/,"")))},r.prototype.stop=function(){return this.__toggleListeners("off"),this.started=!1},r.prototype.set=function(t,e){var n,o,r;if(null==e&&(e={}),this.started&&(null==e.silent&&(e.silent=!0),o=e.replace,t=this.__getURL(t)||"",r=this.root,(""===t||"?"===t.charAt(0))&&(r=r.slice(0,-1)||"/"),n=""+r+t.replace(/^\/*/,""),t=decodeURI(t.replace(/#.*$/,"")),this.url!==t)){if(this.url=t,this.usePush)this.history[o?"replaceState":"pushState"]({},document.title,n);else{if(!this.useHash)return void this.location.assign(fullURL);this.__setHash(this.window,t,o),this.iframe&&t!==this.__getHash(this.iframe)&&this.__setHash(this.iframe,t,o)}e.silent||this.triggerEvent("changed",(this.url=t).replace(/^\/+/,""))}},r.prototype.__toggleListeners=function(t){null==t&&(t="on"),this.pushState?tweak.Common[t](this.window,"popstate",this.__checkChanged):this.useHash&&!this.iframe?tweak.Common[t](this.window,"hashchange",this.__checkChanged):this.useHash&&("on"===t?this.__interval=setInterval(this.__checkChanged,this.intervalRate):(clearInterval(this.__interval),document.body.removeChild(this.iframe.frameElement),this.iframe=this.__interval=null))},r.prototype.__getHash=function(t){var e;return e=(t||this).location.href.match(/#(.*)$/),e?e[1]:""},r.prototype.__getSearch=function(){var t;return t=this.location.href.replace(/#.*/,"").match(/\?.+/),t?t[0]:""},r.prototype.__getPath=function(){var t,e;return t=decodeURI(""+this.location.pathname+this.__getSearch()),e=this.root.slice(0,-1),t.indexOf(e)||(t=t.slice(e.length)),"/"===t.charAt(0)?t.slice(1):t},r.prototype.__getURL=function(t,e){var n;return null==t&&(this.usePush||e?(t=decodeURI(""+this.location.pathname+this.location.search),n=this.root.replace(/\/$/,""),t.indexOf(n)||(t=t.slice(n.length))):t=this.__getHash()),t=t.replace(/^\/{2,}/g,"/"),t.match(/^\/+/)||(t="/"+t),t.replace(/\/+$/g,"")},r.prototype.__setHash=function(t,e,n){this.iframe===t&&t.document.open().close(),n?t.location.replace(""+location.href.replace(/(javascript:|#).*$/,"")+"#"+e):t.location.hash=""+e},r.prototype.__checkChanged=function(){var t,e;if(t=this.__getURL(),e=this.url,t===e){if(!this.iframe)return!1;t=this.__getHash(this.iframe),this.set(t)}return this.triggerEvent("changed",this.url=t),!0},r}(tweak.Events),tweak.History=new tweak.History}(window),function(t){var e={}.hasOwnProperty,n=function(t,n){function o(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};tweak.Router=function(t){function e(t){this.routes=null!=t?t:{},this.uid="r_"+tweak.uids.r++,tweak.History.addEvent("changed",this.__urlChanged,this)}var o,r,i,s;return n(e,t),e.prototype.uid=0,e.prototype["super"]=tweak["super"],e.prototype.add=function(t,e){null!=this.routes[t]?this.routes[t].push(e):this.routes[t]=[e]},e.prototype.remove=function(t,e){var n,o,r,i,s,a;if(r=this.routes[t],"string"==typeof e)for(a=(" "+e.replace(/\s+/g," ")+" ").split(" "),i=0,s=a.length;s>i;i++)o=a[i],r=(" "+r.join(" ")+" ").split(" "+o+" ");else for(n in r)o=r[n],o===e&&delete r[n];this.routes[t]=r,null==r||null!=e&&0!==r.length||delete this.routes[t]},i=/\/?[?:]([^?\/:]*)/g,r=function(t){var e,n,o,r,i,s,a,l;if(s=/^.*\?(.+)/.exec(t)){if(o=/([^&]+)&*/.exec(s[1]))for(a=0,l=o.length;l>a;a++)n=o[a],t={},i=/(.+)[:=]+(.+)|(.+)/.exec(t),i&&(e=i[3]||i[1],r=i[2]||"true",t[e]=r)}else t&&(t=t.replace(/\?/g,""));return t},s=function(t){var e,n;return e=/[\-\\\^\[\]\s{}+.,$|#]/g,n=/\/?(\*)$/,t=t.replace(e,"\\$&"),t=t.replace(i,function(t){var e;return e="\\/?([^\\/]*?)",/^\/?\?/.exec(t)?"(?:"+e+")?":e}),t=t.replace(n,"\\/?(.*?)"),new RegExp("^"+t+"[\\/\\s]?$")},o=function(t){var e;return e=t.match(i)||[],e.push("splat"),e},e.prototype.__urlChanged=function(t){var e,n,i,a,l,p,u,h,c,f;t=t.replace(/^\/+|\/+$/g,""),c=this.routes,f=[];for(e in c)h=c[e],f.push(function(){var c,f,d,m,y,g;for(g=[],c=0,d=h.length;d>c;c++)if(u=h[c],a=[],"string"==typeof u&&(a=o(u),u=s(u)),l=u.exec(t)){for(p={url:t,data:{}},l.splice(0,1),i=0,f=0,m=l.length;m>f;f++)n=l[f],p.data[(null!=(y=a[i])?y.replace(/^[?:\/]*/,""):void 0)||i]=r(n),i++;g.push(this.triggerEvent(e,p))}else g.push(void 0);return g}.call(this));return f},e}(tweak.Events)}(window),function(t){var e=[].slice;tweak.Component=function(){function n(e,n){var o,r,i,s,a,l,p,u,h,c;if(null==n)throw new Error("No options given");if(this.uid="c_"+tweak.uids.c++,e=this.relation=e===t?{}:e,null==e.relation&&(e.relation={}),this.parent=e instanceof tweak.Component?e:e.component||e,this.root=this.parent.root||this,this.name=n.name,null==this.name)throw new Error("No name given");for(n.name=this.name=tweak.Common.relToAbs(this.parent.name||"",this.name),this.config=this.__buildConfig(n)||{},this.config.router&&this.__addRouter(),this.__addModel(),this.__addView(),this.__addComponents(),this.__addController(),h=this.modules,a=0,p=h.length;p>a;a++)if(o=h[a],i=this[o])for(i.parent=this.parent,i.component=this,c=this.modules,l=0,u=c.length;u>l;l++)r=c[l],o!==r&&(s=this[r])&&(i[r]=s)}return n.prototype.model=null,n.prototype.view=null,n.prototype.components=null,n.prototype.controller=null,n.prototype.router=null,n.prototype.uid=0,n.prototype["super"]=tweak["super"],n.prototype.modules=["controller","model","view","router","components"],n.prototype.init=function(){var t,e,n,o,r;for(r=this.modules,n=0,o=r.length;o>n;n++)e=r[n],"view"!==e&&(t=this[e])&&"function"==typeof t.init&&t.init()},n.prototype.__buildConfig=function(t){var e,n,o,r,i,s,a,l,p,u;for(e=[],i=this.paths=[],n=this.name,t&&(e.push(tweak.Common.clone(t)),t["extends"]&&(n=t["extends"])),r=(null!=(p=this.parent)?p.name:void 0)||this.name;n;)s=tweak.Common.require(r,""+n+"/config",tweak.strict?null:{}),i.push(tweak.Common.relToAbs(r,n)),e.push(tweak.Common.clone(s)),n=s["extends"];for(this.names=i,this.names.indexOf(-1===this.name)&&this.names.unshift(this.name),a=e[e.length-1],o=l=u=e.length-2;0>=u?0>=l:l>=0;o=0>=u?++l:--l)a=tweak.Common.combine(a,e[o]);return null==a.model&&(a.model={}),null==a.view&&(a.view={}),null==a.controller&&(a.controller={}),null==a.components&&(a.components=[]),null==a.events&&(a.events={}),a},n.prototype.__addModule=function(){var t,n,o,r,i;o=arguments[0],i=arguments[1],r=3<=arguments.length?e.call(arguments,2):[],t=tweak.Common.findModule(this.paths,"./"+o,i),n=this[o]=function(t,e,n){n.prototype=t.prototype;var o=new n,r=t.apply(o,e);return Object(r)===r?r:o}(t,[this.config[o]].concat(e.call(r)),function(){}),n.component=this,n.root=this.root},n.prototype.__addView=function(){var t;t=1<=arguments.length?e.call(arguments,0):[],this.__addModule.apply(this,["view",tweak.View].concat(e.call(t)))},n.prototype.__addModel=function(){var t;t=1<=arguments.length?e.call(arguments,0):[],this.__addModule.apply(this,["model",tweak.Model].concat(e.call(t)))},n.prototype.__addController=function(){var t;t=1<=arguments.length?e.call(arguments,0):[],this.__addModule.apply(this,["controller",tweak.Controller].concat(e.call(t)))},n.prototype.__addComponents=function(){var t,e,n;n="components",t=tweak.Common.findModule(this.paths,"./"+n,tweak.Components),e=this[n]=new t(this,this.config[n])},n.prototype.__addRouter=function(){var t;t=1<=arguments.length?e.call(arguments,0):[],this.__addModule.apply(this,["router",tweak.Router].concat(e.call(t)))},n.prototype.__componentRender=function(t){this.view.addEvent(""+t+"ed",function(){return this.components.addEvent("ready",function(){return this.controller.triggerEvent("ready")},this,1),this.components[t]()},this,1),this.view[t]()},n.prototype.render=function(){var t;t=this.name,this.__componentRender("render")},n.prototype.rerender=function(){this.__componentRender("rerender")},n.prototype.destroy=function(t){var e,n,o,r,i,s;if(this.view.clear(),e=this.relation.components,null!=e)for(n=0,s=e.data,r=0,i=s.length;i>r;r++){if(o=s[r],o.uid===this.uid)return void e.remove(n,t);n++}},n.prototype.findEvent=function(t,e){return this.controller.findEvent(t,e)},n.prototype.addEvent=function(t,e,n,o){return this.controller.addEvent(t,e,n,o)},n.prototype.removeEvent=function(t,e,n){return this.controller.removeEvent(t,e,n)},n.prototype.triggerEvent=function(){var t,n,o;return t=arguments[0],n=2<=arguments.length?e.call(arguments,1):[],(o=this.controller).triggerEvent.apply(o,[t].concat(e.call(n)))},n.prototype.updateEvent=function(t,e){return this.controller.updateEvent(t,e)},n.prototype.resetEvents=function(){return this.controller.resetEvents()},n.prototype["export"]=function(t){var e;return("function"==typeof(e=this.controller)["export"]?e["export"]():void 0)||{model:this.model["export"](t,{components:this.components["export"]()})}},n.prototype["import"]=function(t){return null!=this.controller["import"]?this.controller["import"](t):(t.model&&this.model["import"](t.model),t.components?this.components["import"](t.components):void 0)},n}()}(window),function(t){var e={}.hasOwnProperty,n=function(t,n){function o(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};tweak.Components=function(t){function e(t,e){this.component=t,this.config=null!=e?e:[],this.root=this.component.root,this.uid="cp_"+tweak.uids.cp++}return n(e,t),e.prototype._type="components",e.prototype.init=function(){var t,e,n,o,r,i,s,a,l,p,u,h,c,f,d,m,y;for(this.data=[],t=[],m=this.component.name||this.config.name,y=this.config,a=0,h=y.length;h>a;a++){if(e=y[a],r={},e instanceof Array)for(o=tweak.Common.splitMultiName(m,e[0]),i=tweak.Common.relToAbs(m,e[1]),l=0,c=o.length;c>l;l++)n=o[l],this.data.push(new tweak.Component(this,{name:n,"extends":i}));else if("string"==typeof e)for(t=tweak.Common.splitMultiName(m,e),p=0,f=t.length;f>p;p++)n=t[p],this.data.push(new tweak.Component(this,{name:n}));else for(r=e,n=r.name,t=tweak.Common.splitMultiName(m,n),r["extends"]=tweak.Common.relToAbs(m,r["extends"]),u=0,d=t.length;d>u;u++)s=t[u],r.name=s,this.data.push(new tweak.Component(this,r));this.data[this.length++].init()}},e.prototype.__componentRender=function(t){var e,n,o,r;if(0===this.length)this.triggerEvent("ready");else for(this.total=0,r=this.data,n=0,o=r.length;o>n;n++)e=r[n],e.controller.addEvent("ready",function(){return++this.total===this.length?this.triggerEvent("ready"):void 0},this,1),e[t]()},e.prototype.render=function(){this.__componentRender("render")},e.prototype.rerender=function(){this.__componentRender("rerender")},e.prototype.whereData=function(t,e){var n,o,r,i,s,a,l;l=[],o=this.data;for(n in o){r=o[n],s=r.model.data||model.data;for(i in s)a=s[i],i===t&&a===e&&l.push(r)}return l},e.prototype.reset=function(){var t,n,o,r;for(r=this.data,n=0,o=r.length;o>n;n++)t=r[n],t.destroy();e.__super__.reset.call(this)},e}(tweak.Collection)}(window);
//# sourceMappingURL=tweak.min.js.map