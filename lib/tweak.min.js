// Generated by CoffeeScript 1.9.2
//# sourceMappingURL=tweak.js.map
(function(){var t,e,n,o,r=[].slice
if(e=function(){function t(t,e,n,o){this.root=t,this.require=n,this.$=o,this.prevTweak=e}return t.prototype.$=void 0,t.prototype.require=void 0,t.prototype.strict=!1,t.prototype["extends"]=function(t,e){var n,o
n=function(){this.constructor=t}
for(o in e)e.hasOwnProperty(o)&&(t[o]=e[o])
return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},t.prototype["super"]=function(t,e){return t.__super__[e].call(t)},t.prototype.noConflict=function(){var e
return e=t=this.pTweak,this},t}(),n="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||window,"function"==typeof define&&define.amd)define(["$","exports"],function(t,o){var r
return r=function(t){return define([t],function(t){return t})},n.tweak=n.Tweak=new e(n,o,r,t)})
else if("undefined"!=typeof exports){try{t=require("$")}catch(i){}if(!t)try{t=require("jquery")}catch(i){}o=e=new e(n,exports,require,t)}else n.tweak=n.Tweak=new e(n,{},n.require,n.jQuery||n.Zepto||n.ender||n.$)
e.Common=function(){function t(){}return t.prototype.combine=function(t,e){var n,r
for(n in e)r=e[n],"object"==typeof r?(null==t[n]&&(t[n]=r instanceof Array?[]:{}),t[n]=o.Common.combine(t[n],r)):t[n]=r
return t},t.prototype.clone=function(t){var e,n
if(null===t||"object"!=typeof t||t===this)return t
if(t instanceof Date)return n=new Date,n.setTime(t.getTime()),n
if(t instanceof Array)n=[]
else{if("object"!=typeof t)throw new Error("Unable to copy object, type not supported.")
n={}}for(e in t)t.hasOwnProperty(e)&&(n[e]=o.Common.clone(t[e]))
return n},t.prototype.parse=function(t){return JSON["string"==typeof t?"parse":"stringify"](t)},t.prototype.findModule=function(t,e,n){var r,i,l,s
for(l=0,s=t.length;s>l;l++){r=t[l]
try{return o.Common.require(r,e)}catch(p){if(i=p,"Error"!==i.name)throw i.message="Module ("+r+"}) found. Encountered "+i.name+": "+i.message,i}}if(null!=n)return n
throw new Error("No default module ("+e+") for component "+t[0])},t.prototype.require=function(t,e,n){var r,i
i=o.Common.relToAbs(t,e)
try{return o.require(i)}catch(l){if(r=l,null!=n)return n
throw r}},t.prototype.splitMultiName=function(t,e){var n,r,i,l,s,p,a,u,c,h
for(h=[],a=/^(.*)\[(\d*)(?:[,\-](\d*)){0,1}\](.*)$/,"string"==typeof e&&(e=e.split(/\s+/)),r=0,i=e.length;i>r;r++)if(n=e[r],u=a.exec(n),null!=u)for(p=u[1],s=u[2]||0,l=u[3]||s,c=u[4];l>=s;)h.push(o.Common.relToAbs(t,""+p+s++ +c))
else h.push(o.Common.relToAbs(t,n))
return h},t.prototype.relToAbs=function(t,e){var n
return n=e.split(/\.{2,}[\/\\]*/).length-1||0,t=t.replace(new RegExp("([\\/\\\\]*[^\\/\\\\]+){"+n+"}[\\/\\\\]?$"),""),e.replace(/^(\.+[\/\\]*)+/,t+"/")},t}(),o.Common=new o.Common,e.Store=function(){function t(){}return e["extends"](t,e.Events),t.prototype._type="BASE",t.prototype.length=0,t.prototype.init=function(){},t.prototype.set=function(){var t,e,n,o,i,l,s,p,a,u
t=arguments[0],i=2<=arguments.length?r.call(arguments,1):[],a=i[0],u=typeof t,("string"===u||"number"===u)&&(s=t,t={},t[s]=i[0],a=i[1]),o={}
for(e in t)p=t[e],l=this._data[e],null==l&&this.length++,this._data[e]=("function"==typeof this[n="__set"+e.replace(/^[a-z]/,function(t){return t.toUpperCase()})]?this[n](p):void 0)||p,a||this.triggerEvent("changed:"+e,p)
a||this.triggerEvent("changed")},t.prototype.same=function(t,e){var n,o
for(n in t)if(o=t[n],null==e[n]||e[n]!==o)return!1
return!0},t.prototype.get=function(){var t,e,n,o,i,l,s,p,a,u
for(p=arguments[0],u=2<=arguments.length?r.call(arguments,1):[],null==p&&(p=function(){var t,e
t=this._data,e=[]
for(l in t)o=t[l],e.push(l)
return e}.call(this)),("string"==typeof p||"number"==typeof p)&&(p=[p]),t=this._data instanceof Array?[]:{},n=i=0,s=p.length;s>i;n=++i)o=p[n],e="function"==typeof this[a="__get"+(""+o).replace(/^[a-z]/,function(t){return t.toUpperCase()})]?this[a].apply(this,u):void 0,null==e&&(e=this._data[o]),t[o]=e
return 1>=n&&(t=t[o]),t},t.prototype.has=function(t,e){var n,o,r,i,l,s
for(("string"==typeof t||"number"==typeof t)&&(t=[t]),o=i=0,l=t.length;l>i;o=++i)if(r=t[o],n="function"==typeof this[s="__get"+r.replace(/^[a-z]/,function(t){return t.toUpperCase()})]?this[s].apply(this,e):void 0,null==n&&null==this._data[r])return!1
return!0},t.prototype.where=function(t){var e,n,o,r
r=[],e=this._data
for(n in e)o=e[n],o===t&&r.push(n)
return r},t.prototype.reset=function(){this.length=0,this.triggerEvent("changed")},t.prototype["import"]=function(t,e){var n,o,r
null==e&&(e=!0)
for(o in t)n=t[o],null!=(null!=(r=this._data[o])?r["import"]:void 0)?this._data[o]["import"](n,e):this.set(o,n,e)},t.prototype["export"]=function(t){var e,n,o,r,i
for(i={},null==t&&(t=function(){var t,n
t=this._data,n=[]
for(o in t)e=t[o],n.push(o)
return n}.call(this)),n=0,r=t.length;r>n;n++)o=t[n],null!=(e=this.get(o))&&(null!=e["export"]?i[o]=e["export"]():i[o]=e)
return i},t}(),e.Component=function(){function t(t,e){var n,r,i,l,s,p,a,u,c,h
if(null==e)throw new Error("No options given")
if(t=this.relation=t===window?{}:t,null==t.relation&&(t.relation={}),this.parent=t instanceof o.Component?t:t.component||t,this.root=this.parent.root||this,this.name=e.name,null==this.name)throw new Error("No name given")
for(e.name=this.name=o.Common.relToAbs(this.parent.name||"",this.name),this.config=this.__buildConfig(e),this.config.router&&this.__addRouter(),this.__addModel(),this.__addView(),this.__addComponents(),this.__addController(),c=this.modules,n=0,i=c.length;i>n;n++)if(s=c[n],a=this[s])for(a.parent=this.parent,a.component=this,h=this.modules,r=0,l=h.length;l>r;r++)p=h[r],s!==p&&(u=this[p])&&(a[p]=u)}return t.prototype.model=null,t.prototype.view=null,t.prototype.components=null,t.prototype.controller=null,t.prototype.router=null,t.prototype.modules=["controller","model","view","router","components"],t.prototype.init=function(){var t,e,n,o,r
for(r=this.modules,e=0,n=r.length;n>e;e++)o=r[e],"view"!==o&&(t=this[o])&&"function"==typeof t.init&&t.init()},t.prototype.__buildConfig=function(t){var e,n,r,i,l,s,p,a,u,c
for(e=[],s=this.paths=[],n=this.name,t&&(e.push(o.Common.clone(t)),t["extends"]&&(n=t["extends"])),l=(null!=(p=this.parent)?p.name:void 0)||this.name;n;)u=o.Common.require(l,n+"/config",o.strict?null:{}),s.push(o.Common.relToAbs(l,n)),e.push(o.Common.clone(u)),n=u["extends"]
for(c=e[e.length-1],r=i=a=e.length-2;0>=a?0>=i:i>=0;r=0>=a?++i:--i)c=o.Common.combine(c,e[r])
return null==c.model&&(c.model={}),null==c.view&&(c.view={}),null==c.controller&&(c.controller={}),null==c.components&&(c.components=[]),null==c.events&&(c.events={}),c},t.prototype.__addModule=function(){var t,e,n,i,l
n=arguments[0],l=arguments[1],i=3<=arguments.length?r.call(arguments,2):[],t=o.Common.findModule(this.paths,"./"+n,l),e=this[n]=function(t,e,n){n.prototype=t.prototype
var o=new n,r=t.apply(o,e)
return Object(r)===r?r:o}(t,[this.config[n]].concat(r.call(i)),function(){}),e.component=this,e.root=this.root},t.prototype.__addView=function(){var t
t=1<=arguments.length?r.call(arguments,0):[],this.__addModule.apply(this,["view",o.View].concat(r.call(t)))},t.prototype.__addModel=function(){var t
t=1<=arguments.length?r.call(arguments,0):[],this.__addModule.apply(this,["model",o.Model].concat(r.call(t)))},t.prototype.__addController=function(){var t
t=1<=arguments.length?r.call(arguments,0):[],this.__addModule.apply(this,["controller",o.Controller].concat(r.call(t)))},t.prototype.__addComponents=function(){var t
t=1<=arguments.length?r.call(arguments,0):[],this.__addModule.apply(this,["components",o.Components].concat(r.call(t)))},t.prototype.__addRouter=function(){var t
t=1<=arguments.length?r.call(arguments,0):[],this.__addModule.apply(this,["router",o.Router].concat(r.call(t)))},t.prototype.__componentRender=function(t){this.view.addEvent(t+"ed",function(){return this.components.addEvent("ready",function(){return this.controller.triggerEvent("ready")},this,1),this.components[t]()},this,1),this.view[t]()},t.prototype.render=function(){var t
t=this.name,this.__componentRender("render")},t.prototype.rerender=function(){this.__componentRender("rerender")},t.prototype.destroy=function(t){var e,n,o,r,i,l
if(this.view.clear(),e=this.relation.components,null!=e)for(n=0,l=e.data,r=0,i=l.length;i>r;r++){if(o=l[r],o.uid===this.uid)return void e.remove(n,t)
n++}},t.prototype.findEvent=function(t,e){return this.controller.findEvent(t,e)},t.prototype.addEvent=function(t,e,n,o){return this.controller.addEvent(t,e,n,o)},t.prototype.removeEvent=function(t,e,n){return this.controller.removeEvent(t,e,n)},t.prototype.triggerEvent=function(){var t,e,n
return t=arguments[0],e=2<=arguments.length?r.call(arguments,1):[],(n=this.controller).triggerEvent.apply(n,[t].concat(r.call(e)))},t.prototype.updateEvent=function(t,e){return this.controller.updateEvent(t,e)},t.prototype.resetEvents=function(){return this.controller.resetEvents()},t.prototype["export"]=function(t){var e
return("function"==typeof(e=this.controller)["export"]?e["export"]():void 0)||{model:this.model["export"](t,{components:this.components["export"]()})}},t.prototype["import"]=function(t){return null!=this.controller["import"]?this.controller["import"](t):(t.model&&this.model["import"](t.model),t.components?this.components["import"](t.components):void 0)},t}(),e.Components=function(){function t(){}return e["extends"](t,e.Collection),t.prototype._type="components",t.prototype.init=function(){var t,e,n,r,i,l,s,p,a,u,c,h,f,m,d,y,g
for(this._data=[],e=[],t=this.component.name,g=this.component.config.components,r=0,s=g.length;s>r;r++){if(n=g[r],m={},n instanceof Array)for(f=o.Common.splitMultiName(t,n[0]),d=o.Common.relToAbs(t,n[1]),i=0,p=f.length;p>i;i++)h=f[i],this._data.push(new o.Component(this,{name:h,"extends":d}))
else if("string"==typeof n)for(e=o.Common.splitMultiName(t,n),l=0,a=e.length;a>l;l++)h=e[l],this._data.push(new o.Component(this,{name:h}))
else for(m=n,h=m.name,e=o.Common.splitMultiName(t,h),m["extends"]=o.Common.relToAbs(t,m["extends"]),c=0,u=e.length;u>c;c++)y=e[c],m.name=y,this._data.push(new o.Component(this,m))
this._data[this.length++].init()}},t.prototype.__componentRender=function(t){var e,n,o,r
if(0===this.length)this.triggerEvent("ready")
else for(this.total=0,r=this._data,n=0,o=r.length;o>n;n++)e=r[n],e.controller.addEvent("ready",function(){return++this.total===this.length?this.triggerEvent("ready"):void 0},this,1),e[t]()},t.prototype.render=function(){this.__componentRender("render")},t.prototype.rerender=function(){this.__componentRender("rerender")},t.prototype.whereData=function(t,e){var n,o,r,i,l,s,p
p=[],o=this._data
for(n in o){r=o[n],l=r.model.data||model.data
for(i in l)s=l[i],i===t&&s===e&&p.push(r)}return p},t.prototype.reset=function(){var e,n,o,r
for(r=this._data,n=0,o=r.length;o>n;n++)e=r[n],e.destroy()
t.__super__.reset.call(this)},t}()}).call(this)
